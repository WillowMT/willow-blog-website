---
import {
    sanityPortableText,
    getAllBlogPost,
    urlForImage,
} from "../../utils/utils";
import { PortableText } from "@portabletext/react";
import CodeBlock, { Test } from "../../components/CodeBlock";
import Navigation from "../../components/Blog/Navigation.astro";
import Content from "../../components/Blog/Content.astro";
import Footer from "../../components/Blog/Footer.astro";

export async function getStaticPaths() {
    const posts = await getAllBlogPost();
    const params = posts.map((p: any) => {
        return {
            params: { post: p.slug.current },
            props: { posts: p },
        };
    });

    return params;
}

export const prerender = true;

const { post } = Astro.params;
const { posts } = Astro.props;
---

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{posts.title}</title>
</head>
<body>
    <div class="max-w-3xl m-auto p-5">
        <Navigation />
        <Content blog={posts} />
        <Footer />
    </div>
</body>
